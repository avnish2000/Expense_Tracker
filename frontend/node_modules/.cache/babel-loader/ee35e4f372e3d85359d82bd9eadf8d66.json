{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Scene } from \"../scene/scene\";\nimport { Group } from \"../scene/group\";\nimport { Padding } from \"../util/padding\";\nimport { Shape } from \"../scene/shape/shape\";\nimport { Rect } from \"../scene/shape/rect\";\nimport { Legend } from \"./legend\";\nimport { find } from \"../util/array\";\nimport { SizeMonitor } from \"../util/sizeMonitor\";\nimport { Observable, reactive } from \"../util/observable\";\nimport { CartesianSeries } from \"./series/cartesian/cartesianSeries\";\nimport { createId } from \"../util/id\";\nvar defaultTooltipCss = \"\\n.ag-chart-tooltip {\\n    display: none;\\n    position: absolute;\\n    user-select: none;\\n    pointer-events: none;\\n    white-space: nowrap;\\n    z-index: 99999;\\n    font: 12px Verdana, sans-serif;\\n    color: black;\\n    background: rgb(244, 244, 244);\\n    border-radius: 5px;\\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\\n}\\n\\n.ag-chart-tooltip-visible {\\n    display: table;\\n}\\n\\n.ag-chart-tooltip-title {\\n    font-weight: bold;\\n    padding: 7px;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n    color: white;\\n    background-color: #888888;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-content {\\n    padding: 7px;\\n    line-height: 1.7em;\\n    border-bottom-left-radius: 5px;\\n    border-bottom-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-arrow::before {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 6px solid #989898;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: #989898;\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-tooltip-arrow::after {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 5px solid black;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: rgb(244, 244, 244);\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-wrapper {\\n    box-sizing: border-box;\\n    overflow: hidden;\\n}\\n\";\nexport function toTooltipHtml(input, defaults) {\n  if (typeof input === 'string') {\n    return input;\n  }\n\n  defaults = defaults || {};\n  var _a = input.content,\n      content = _a === void 0 ? defaults.content || '' : _a,\n      _b = input.title,\n      title = _b === void 0 ? defaults.title || undefined : _b,\n      _c = input.titleColor,\n      titleColor = _c === void 0 ? defaults.titleColor || 'white' : _c,\n      _d = input.titleBackgroundColor,\n      titleBackgroundColor = _d === void 0 ? defaults.titleBackgroundColor || '#888' : _d;\n  var titleHtml = title ? \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-title\\\"\\n        style=\\\"color: \" + titleColor + \"; background-color: \" + titleBackgroundColor + \"\\\">\" + title + \"</div>\" : '';\n  return titleHtml + \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-content\\\">\" + content + \"</div>\";\n}\n\nvar Chart =\n/** @class */\nfunction (_super) {\n  __extends(Chart, _super);\n\n  function Chart(document) {\n    if (document === void 0) {\n      document = window.document;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.id = createId(_this);\n    _this.background = new Rect();\n    _this.legend = new Legend();\n    _this.legendAutoPadding = new Padding();\n    _this.captionAutoPadding = 0; // top padding only\n\n    _this._container = undefined;\n    _this._data = [];\n    _this._autoSize = false;\n    _this.padding = new Padding(20);\n    _this._axes = [];\n    _this._series = [];\n    _this._axesChanged = false;\n    _this._seriesChanged = false;\n    _this.layoutCallbackId = 0;\n\n    _this._performLayout = function () {\n      _this.layoutCallbackId = 0;\n      _this.background.width = _this.width;\n      _this.background.height = _this.height;\n\n      _this.performLayout();\n\n      if (!_this.layoutPending) {\n        _this.fireEvent({\n          type: 'layoutDone'\n        });\n      }\n    };\n\n    _this.dataCallbackId = 0;\n    _this._onMouseDown = _this.onMouseDown.bind(_this);\n    _this._onMouseUp = _this.onMouseUp.bind(_this);\n    _this._onMouseMove = _this.onMouseMove.bind(_this);\n    _this._onMouseOut = _this.onMouseOut.bind(_this);\n    _this._onClick = _this.onClick.bind(_this);\n    _this._tooltipClass = Chart.defaultTooltipClass;\n    /**\n     * If `true`, the tooltip will be shown for the marker closest to the mouse cursor.\n     * Only has effect on series with markers.\n     */\n\n    _this.tooltipTracking = true;\n    var root = new Group();\n    var background = _this.background;\n    background.fill = 'white';\n    root.appendChild(background);\n    var element = _this._element = document.createElement('div');\n    element.setAttribute('class', 'ag-chart-wrapper');\n    var scene = new Scene(document);\n    _this.scene = scene;\n    scene.root = root;\n    scene.container = element;\n    _this.autoSize = true;\n    var legend = _this.legend;\n    legend.addEventListener('layoutChange', _this.onLayoutChange, _this);\n    legend.addPropertyListener('position', _this.onLegendPositionChange, _this);\n    _this.tooltipElement = document.createElement('div');\n    _this.tooltipClass = '';\n    document.body.appendChild(_this.tooltipElement);\n\n    if (Chart.tooltipDocuments.indexOf(document) < 0) {\n      var styleElement = document.createElement('style');\n      styleElement.innerHTML = defaultTooltipCss; // Make sure the default tooltip style goes before other styles so it can be overridden.\n\n      document.head.insertBefore(styleElement, document.head.querySelector('style'));\n      Chart.tooltipDocuments.push(document);\n    }\n\n    _this.setupDomListeners(scene.canvas.element);\n\n    _this.addPropertyListener('title', _this.onCaptionChange);\n\n    _this.addPropertyListener('subtitle', _this.onCaptionChange);\n\n    _this.addEventListener('layoutChange', function () {\n      return _this.layoutPending = true;\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(Chart.prototype, \"container\", {\n    get: function () {\n      return this._container;\n    },\n    set: function (value) {\n      if (this._container !== value) {\n        var parentNode = this.element.parentNode;\n\n        if (parentNode != null) {\n          parentNode.removeChild(this.element);\n        }\n\n        if (value) {\n          value.appendChild(this.element);\n        }\n\n        this._container = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"data\", {\n    get: function () {\n      return this._data;\n    },\n    set: function (data) {\n      this._data = data;\n      this.series.forEach(function (series) {\n        return series.data = data;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"width\", {\n    get: function () {\n      return this.scene.width;\n    },\n    set: function (value) {\n      this.autoSize = false;\n\n      if (this.width !== value) {\n        this.scene.resize(value, this.height);\n        this.fireEvent({\n          type: 'layoutChange'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"height\", {\n    get: function () {\n      return this.scene.height;\n    },\n    set: function (value) {\n      this.autoSize = false;\n\n      if (this.height !== value) {\n        this.scene.resize(this.width, value);\n        this.fireEvent({\n          type: 'layoutChange'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"autoSize\", {\n    get: function () {\n      return this._autoSize;\n    },\n    set: function (value) {\n      if (this._autoSize !== value) {\n        this._autoSize = value;\n        var style = this.element.style;\n\n        if (value) {\n          var chart_1 = this; // capture `this` for IE11\n\n          SizeMonitor.observe(this.element, function (size) {\n            if (size.width !== chart_1.width || size.height !== chart_1.height) {\n              chart_1.scene.resize(size.width, size.height);\n              chart_1.fireEvent({\n                type: 'layoutChange'\n              });\n            }\n          });\n          style.display = 'block';\n          style.width = '100%';\n          style.height = '100%';\n        } else {\n          SizeMonitor.unobserve(this.element);\n          style.display = 'inline-block';\n          style.width = 'auto';\n          style.height = 'auto';\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.download = function (fileName) {\n    this.scene.download(fileName);\n  };\n\n  Chart.prototype.destroy = function () {\n    var tooltipParent = this.tooltipElement.parentNode;\n\n    if (tooltipParent) {\n      tooltipParent.removeChild(this.tooltipElement);\n    }\n\n    SizeMonitor.unobserve(this.element);\n    this.container = undefined;\n    this.cleanupDomListeners(this.scene.canvas.element);\n    this.scene.container = undefined;\n  };\n\n  Chart.prototype.onLayoutChange = function () {\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.onLegendPositionChange = function () {\n    this.legendAutoPadding.clear();\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.onCaptionChange = function (event) {\n    var value = event.value,\n        oldValue = event.oldValue;\n\n    if (oldValue) {\n      oldValue.removeEventListener('change', this.onLayoutChange, this);\n      this.scene.root.removeChild(oldValue.node);\n    }\n\n    if (value) {\n      value.addEventListener('change', this.onLayoutChange, this);\n      this.scene.root.appendChild(value.node);\n    }\n  };\n\n  Object.defineProperty(Chart.prototype, \"element\", {\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"axes\", {\n    get: function () {\n      return this._axes;\n    },\n    set: function (values) {\n      var _this = this;\n\n      this._axes.forEach(function (axis) {\n        return _this.detachAxis(axis);\n      }); // make linked axes go after the regular ones (simulates stable sort by `linkedTo` property)\n\n\n      this._axes = values.filter(function (a) {\n        return !a.linkedTo;\n      }).concat(values.filter(function (a) {\n        return a.linkedTo;\n      }));\n\n      this._axes.forEach(function (axis) {\n        return _this.attachAxis(axis);\n      });\n\n      this.axesChanged = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.attachAxis = function (axis) {\n    this.scene.root.insertBefore(axis.group, this.seriesRoot);\n  };\n\n  Chart.prototype.detachAxis = function (axis) {\n    this.scene.root.removeChild(axis.group);\n  };\n\n  Object.defineProperty(Chart.prototype, \"series\", {\n    get: function () {\n      return this._series;\n    },\n    set: function (values) {\n      var _this = this;\n\n      this.removeAllSeries();\n      values.forEach(function (series) {\n        return _this.addSeries(series);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.scheduleLayout = function () {\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.scheduleData = function () {\n    // To prevent the chart from thinking the cursor is over the same node\n    // after a change to data (the nodes are reused on data changes).\n    this.dehighlightDatum();\n    this.dataPending = true;\n  };\n\n  Chart.prototype.addSeries = function (series, before) {\n    var _a = this,\n        allSeries = _a.series,\n        seriesRoot = _a.seriesRoot;\n\n    var canAdd = allSeries.indexOf(series) < 0;\n\n    if (canAdd) {\n      var beforeIndex = before ? allSeries.indexOf(before) : -1;\n\n      if (beforeIndex >= 0) {\n        allSeries.splice(beforeIndex, 0, series);\n        seriesRoot.insertBefore(series.group, before.group);\n      } else {\n        allSeries.push(series);\n        seriesRoot.append(series.group);\n      }\n\n      this.initSeries(series);\n      this.seriesChanged = true;\n      this.axesChanged = true;\n      return true;\n    }\n\n    return false;\n  };\n\n  Chart.prototype.initSeries = function (series) {\n    series.chart = this;\n\n    if (!series.data) {\n      series.data = this.data;\n    }\n\n    series.addEventListener('layoutChange', this.scheduleLayout, this);\n    series.addEventListener('dataChange', this.scheduleData, this);\n    series.addEventListener('legendChange', this.updateLegend, this);\n    series.addEventListener('nodeClick', this.onSeriesNodeClick, this);\n  };\n\n  Chart.prototype.freeSeries = function (series) {\n    series.chart = undefined;\n    series.removeEventListener('layoutChange', this.scheduleLayout, this);\n    series.removeEventListener('dataChange', this.scheduleData, this);\n    series.removeEventListener('legendChange', this.updateLegend, this);\n    series.removeEventListener('nodeClick', this.onSeriesNodeClick, this);\n  };\n\n  Chart.prototype.addSeriesAfter = function (series, after) {\n    var _a = this,\n        allSeries = _a.series,\n        seriesRoot = _a.seriesRoot;\n\n    var canAdd = allSeries.indexOf(series) < 0;\n\n    if (canAdd) {\n      var afterIndex = after ? this.series.indexOf(after) : -1;\n\n      if (afterIndex >= 0) {\n        if (afterIndex + 1 < allSeries.length) {\n          seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n        } else {\n          seriesRoot.append(series.group);\n        }\n\n        this.initSeries(series);\n        allSeries.splice(afterIndex + 1, 0, series);\n      } else {\n        if (allSeries.length > 0) {\n          seriesRoot.insertBefore(series.group, allSeries[0].group);\n        } else {\n          seriesRoot.append(series.group);\n        }\n\n        this.initSeries(series);\n        allSeries.unshift(series);\n      }\n\n      this.seriesChanged = true;\n      this.axesChanged = true;\n    }\n\n    return false;\n  };\n\n  Chart.prototype.removeSeries = function (series) {\n    var index = this.series.indexOf(series);\n\n    if (index >= 0) {\n      this.series.splice(index, 1);\n      this.freeSeries(series);\n      this.seriesRoot.removeChild(series.group);\n      this.seriesChanged = true;\n      return true;\n    }\n\n    return false;\n  };\n\n  Chart.prototype.removeAllSeries = function () {\n    var _this = this;\n\n    this.series.forEach(function (series) {\n      _this.freeSeries(series);\n\n      _this.seriesRoot.removeChild(series.group);\n    });\n    this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n\n    this.seriesChanged = true;\n  };\n\n  Chart.prototype.assignSeriesToAxes = function () {\n    var _this = this;\n\n    this.axes.forEach(function (axis) {\n      var axisName = axis.direction + 'Axis';\n      var boundSeries = [];\n\n      _this.series.forEach(function (series) {\n        if (series[axisName] === axis) {\n          boundSeries.push(series);\n        }\n      });\n\n      axis.boundSeries = boundSeries;\n    });\n    this.seriesChanged = false;\n  };\n\n  Chart.prototype.assignAxesToSeries = function (force) {\n    var _this = this;\n\n    if (force === void 0) {\n      force = false;\n    } // This method has to run before `assignSeriesToAxes`.\n\n\n    var directionToAxesMap = {};\n    this.axes.forEach(function (axis) {\n      var direction = axis.direction;\n      var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n      directionAxes.push(axis);\n    });\n    this.series.forEach(function (series) {\n      series.directions.forEach(function (direction) {\n        var axisName = direction + 'Axis';\n\n        if (!series[axisName] || force) {\n          var directionAxes = directionToAxesMap[direction];\n\n          if (directionAxes) {\n            var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n\n            if (axis) {\n              series[axisName] = axis;\n            }\n          }\n        }\n      });\n\n      if (series instanceof CartesianSeries) {\n        if (!series.xAxis) {\n          console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n          return;\n        }\n\n        if (!series.yAxis) {\n          console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n          return;\n        }\n      }\n    });\n    this.axesChanged = false;\n  };\n\n  Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n    for (var i = 0; i < directionAxes.length; i++) {\n      var axis = directionAxes[i];\n      var axisKeys = axis.keys;\n\n      if (!axisKeys.length) {\n        return axis;\n      } else if (directionKeys) {\n        for (var j = 0; j < directionKeys.length; j++) {\n          if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n            return axis;\n          }\n        }\n      }\n    }\n  };\n\n  Object.defineProperty(Chart.prototype, \"axesChanged\", {\n    get: function () {\n      return this._axesChanged;\n    },\n    set: function (value) {\n      this._axesChanged = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n    get: function () {\n      return this._seriesChanged;\n    },\n    set: function (value) {\n      this._seriesChanged = value;\n\n      if (value) {\n        this.dataPending = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"layoutPending\", {\n    /**\n     * Only `true` while we are waiting for the layout to start.\n     * This will be `false` if the layout has already started and is ongoing.\n     */\n    get: function () {\n      return !!this.layoutCallbackId;\n    },\n    set: function (value) {\n      if (value) {\n        if (!(this.layoutCallbackId || this.dataPending)) {\n          this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n        }\n      } else if (this.layoutCallbackId) {\n        cancelAnimationFrame(this.layoutCallbackId);\n        this.layoutCallbackId = 0;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"dataPending\", {\n    get: function () {\n      return !!this.dataCallbackId;\n    },\n    set: function (value) {\n      var _this = this;\n\n      if (this.dataCallbackId) {\n        clearTimeout(this.dataCallbackId);\n        this.dataCallbackId = 0;\n      }\n\n      if (value) {\n        this.dataCallbackId = window.setTimeout(function () {\n          _this.dataPending = false;\n\n          _this.processData();\n        }, 0);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.processData = function () {\n    this.layoutPending = false;\n\n    if (this.axesChanged) {\n      this.assignAxesToSeries(true);\n      this.assignSeriesToAxes();\n    }\n\n    if (this.seriesChanged) {\n      this.assignSeriesToAxes();\n    }\n\n    this.series.filter(function (s) {\n      return s.visible;\n    }).forEach(function (series) {\n      return series.processData();\n    });\n    this.updateLegend();\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.updateLegend = function () {\n    var legendData = [];\n    this.series.filter(function (s) {\n      return s.showInLegend;\n    }).forEach(function (series) {\n      return series.listSeriesItems(legendData);\n    });\n    this.legend.data = legendData;\n  };\n\n  Chart.prototype.positionCaptions = function () {\n    var _a = this,\n        title = _a.title,\n        subtitle = _a.subtitle;\n\n    var titleVisible = false;\n    var subtitleVisible = false;\n    var spacing = 10;\n    var paddingTop = spacing;\n\n    if (title && title.enabled) {\n      title.node.x = this.width / 2;\n      title.node.y = paddingTop;\n      titleVisible = true;\n      var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n\n      if (titleBBox) {\n        paddingTop = titleBBox.y + titleBBox.height;\n      }\n\n      if (subtitle && subtitle.enabled) {\n        subtitle.node.x = this.width / 2;\n        subtitle.node.y = paddingTop + spacing;\n        subtitleVisible = true;\n        var subtitleBBox = subtitle.node.computeBBox();\n\n        if (subtitleBBox) {\n          paddingTop = subtitleBBox.y + subtitleBBox.height;\n        }\n      }\n    }\n\n    if (title) {\n      title.node.visible = titleVisible;\n    }\n\n    if (subtitle) {\n      subtitle.node.visible = subtitleVisible;\n    }\n\n    this.captionAutoPadding = Math.floor(paddingTop);\n  };\n\n  Chart.prototype.positionLegend = function () {\n    if (!this.legend.enabled || !this.legend.data.length) {\n      return;\n    }\n\n    var _a = this,\n        legend = _a.legend,\n        captionAutoPadding = _a.captionAutoPadding,\n        legendAutoPadding = _a.legendAutoPadding;\n\n    var width = this.width;\n    var height = this.height - captionAutoPadding;\n    var legendGroup = legend.group;\n    var legendSpacing = legend.spacing;\n    var translationX = 0;\n    var translationY = 0;\n    var legendBBox;\n\n    switch (legend.position) {\n      case 'bottom':\n        legend.performLayout(width - legendSpacing * 2, 0);\n        legendBBox = legendGroup.computeBBox();\n        translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n        translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendSpacing;\n        legendAutoPadding.bottom = legendBBox.height;\n        break;\n\n      case 'top':\n        legend.performLayout(width - legendSpacing * 2, 0);\n        legendBBox = legendGroup.computeBBox();\n        translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n        translationY = captionAutoPadding + legendSpacing - legendBBox.y;\n        legendAutoPadding.top = legendBBox.height;\n        break;\n\n      case 'left':\n        legend.performLayout(0, height - legendSpacing * 2);\n        legendBBox = legendGroup.computeBBox();\n        translationX = legendSpacing - legendBBox.x;\n        translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n        legendAutoPadding.left = legendBBox.width;\n        break;\n\n      default:\n        // case 'right':\n        legend.performLayout(0, height - legendSpacing * 2);\n        legendBBox = legendGroup.computeBBox();\n        translationX = width - legendBBox.width - legendBBox.x - legendSpacing;\n        translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n        legendAutoPadding.right = legendBBox.width;\n        break;\n    } // Round off for pixel grid alignment to work properly.\n\n\n    legendGroup.translationX = Math.floor(translationX + legendGroup.translationX);\n    legendGroup.translationY = Math.floor(translationY + legendGroup.translationY);\n  };\n\n  Chart.prototype.setupDomListeners = function (chartElement) {\n    chartElement.addEventListener('mousedown', this._onMouseDown);\n    chartElement.addEventListener('mousemove', this._onMouseMove);\n    chartElement.addEventListener('mouseup', this._onMouseUp);\n    chartElement.addEventListener('mouseout', this._onMouseOut);\n    chartElement.addEventListener('click', this._onClick);\n  };\n\n  Chart.prototype.cleanupDomListeners = function (chartElement) {\n    chartElement.removeEventListener('mousedown', this._onMouseDown);\n    chartElement.removeEventListener('mousemove', this._onMouseMove);\n    chartElement.removeEventListener('mouseup', this._onMouseUp);\n    chartElement.removeEventListener('mouseout', this._onMouseOut);\n    chartElement.removeEventListener('click', this._onClick);\n  }; // x/y are local canvas coordinates in CSS pixels, not actual pixels\n\n\n  Chart.prototype.pickSeriesNode = function (x, y) {\n    if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n      return undefined;\n    }\n\n    var allSeries = this.series;\n    var node = undefined;\n\n    for (var i = allSeries.length - 1; i >= 0; i--) {\n      var series = allSeries[i];\n      node = series.group.pickNode(x, y);\n\n      if (node) {\n        return {\n          series: series,\n          node: node\n        };\n      }\n    }\n  }; // Provided x/y are in canvas coordinates.\n\n\n  Chart.prototype.pickClosestSeriesNodeDatum = function (x, y) {\n    if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n      return undefined;\n    }\n\n    var allSeries = this.series;\n\n    function getDistance(p1, p2) {\n      return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    }\n\n    var minDistance = Infinity;\n    var closestDatum;\n\n    var _loop_1 = function (i) {\n      var series = allSeries[i];\n\n      if (!series.visible) {\n        return \"continue\";\n      }\n\n      var hitPoint = series.group.transformPoint(x, y);\n      series.getNodeData().forEach(function (datum) {\n        if (!datum.point) {\n          return;\n        }\n\n        var distance = getDistance(hitPoint, datum.point);\n\n        if (distance < minDistance) {\n          minDistance = distance;\n          closestDatum = datum;\n        }\n      });\n    };\n\n    for (var i = allSeries.length - 1; i >= 0; i--) {\n      _loop_1(i);\n    }\n\n    if (closestDatum) {\n      return closestDatum;\n    }\n  };\n\n  Chart.prototype.onMouseMove = function (event) {\n    var _a = this,\n        lastPick = _a.lastPick,\n        tooltipTracking = _a.tooltipTracking;\n\n    var pick = this.pickSeriesNode(event.offsetX, event.offsetY);\n    var nodeDatum;\n\n    if (pick && pick.node instanceof Shape) {\n      var node = pick.node;\n      nodeDatum = node.datum;\n\n      if (lastPick && lastPick.datum === nodeDatum) {\n        lastPick.node = node;\n      } // Marker nodes will have the `point` info in their datums.\n      // Highlight if not a marker node or, if not in the tracking mode, highlight markers too.\n\n\n      if (!node.datum.point || !tooltipTracking) {\n        if (!lastPick // cursor moved from empty space to a node\n        || lastPick.node !== node) {\n          // cursor moved from one node to another\n          this.onSeriesDatumPick(event, node.datum, node);\n        } else if (pick.series.tooltipEnabled) {\n          // cursor moved within the same node\n          this.showTooltip(event);\n        } // A non-marker node (takes precedence over marker nodes) was highlighted.\n        // Or we are not in the tracking mode.\n        // Either way, we are done at this point.\n\n\n        return;\n      }\n    }\n\n    var hideTooltip = false; // In tracking mode a tooltip is shown for the closest rendered datum.\n    // This makes it easier to show tooltips when markers are small and/or plentiful\n    // and also gives the ability to show tooltips even when the series were configured\n    // to not render markers.\n\n    if (tooltipTracking) {\n      var closestDatum = this.pickClosestSeriesNodeDatum(event.offsetX, event.offsetY);\n\n      if (closestDatum && closestDatum.point) {\n        var _b = closestDatum.point,\n            x = _b.x,\n            y = _b.y;\n        var canvas = this.scene.canvas;\n        var point = closestDatum.series.group.inverseTransformPoint(x, y);\n        var canvasRect = canvas.element.getBoundingClientRect();\n        this.onSeriesDatumPick({\n          pageX: Math.round(canvasRect.left + window.pageXOffset + point.x),\n          pageY: Math.round(canvasRect.top + window.pageYOffset + point.y)\n        }, closestDatum, nodeDatum === closestDatum && pick ? pick.node : undefined);\n      } else {\n        hideTooltip = true;\n      }\n    }\n\n    if (lastPick && (hideTooltip || !tooltipTracking)) {\n      // cursor moved from a non-marker node to empty space\n      this.dehighlightDatum();\n      this.hideTooltip();\n      this.lastPick = undefined;\n    }\n  };\n\n  Chart.prototype.onMouseDown = function (event) {};\n\n  Chart.prototype.onMouseUp = function (event) {};\n\n  Chart.prototype.onMouseOut = function (event) {\n    this.toggleTooltip(false);\n  };\n\n  Chart.prototype.onClick = function (event) {\n    this.checkSeriesNodeClick();\n    this.checkLegendClick(event);\n  };\n\n  Chart.prototype.checkSeriesNodeClick = function () {\n    var lastPick = this.lastPick;\n\n    if (lastPick && lastPick.node) {\n      var datum = lastPick.datum;\n      datum.series.fireNodeClickEvent(datum);\n    }\n  };\n\n  Chart.prototype.onSeriesNodeClick = function (event) {\n    this.fireEvent(__assign(__assign({}, event), {\n      type: 'seriesNodeClick'\n    }));\n  };\n\n  Chart.prototype.checkLegendClick = function (event) {\n    var datum = this.legend.getDatumForPoint(event.offsetX, event.offsetY);\n\n    if (datum) {\n      var id_1 = datum.id,\n          itemId = datum.itemId,\n          enabled = datum.enabled;\n      var series = find(this.series, function (series) {\n        return series.id === id_1;\n      });\n\n      if (series) {\n        series.toggleSeriesItem(itemId, !enabled);\n\n        if (enabled) {\n          this.hideTooltip();\n        }\n      }\n    }\n  };\n\n  Chart.prototype.onSeriesDatumPick = function (meta, datum, node) {\n    if (this.lastPick) {\n      // this.lastPick.datum.series.dehighlightDatum();\n      this.dehighlightDatum();\n    }\n\n    this.lastPick = {\n      datum: datum,\n      node: node\n    };\n    this.highlightDatum(datum);\n    var html = datum.series.tooltipEnabled && datum.series.getTooltipHtml(datum);\n\n    if (html) {\n      this.showTooltip(meta, html);\n    }\n  };\n\n  Chart.prototype.highlightDatum = function (datum) {\n    this.highlightedDatum = datum;\n    this.series.forEach(function (s) {\n      return s.onHighlightChange();\n    });\n  };\n\n  Chart.prototype.dehighlightDatum = function () {\n    if (this.highlightedDatum) {\n      this.highlightedDatum = undefined;\n      this.series.forEach(function (s) {\n        return s.onHighlightChange();\n      });\n    }\n  };\n\n  Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n    get: function () {\n      return this._tooltipClass;\n    },\n    set: function (value) {\n      if (this._tooltipClass !== value) {\n        this._tooltipClass = value;\n        this.toggleTooltip();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.toggleTooltip = function (visible) {\n    if (!visible && this.lastPick) {\n      this.dehighlightDatum();\n      this.lastPick = undefined;\n    }\n\n    this.updateTooltipClass(visible);\n  };\n\n  Chart.prototype.updateTooltipClass = function (visible, constrained) {\n    var classList = [Chart.defaultTooltipClass, this.tooltipClass];\n\n    if (visible === true) {\n      classList.push(Chart.defaultTooltipClass + \"-visible\");\n    }\n\n    if (constrained !== true) {\n      classList.push(Chart.defaultTooltipClass + \"-arrow\");\n    }\n\n    this.tooltipElement.setAttribute('class', classList.join(' '));\n  };\n  /**\n   * Shows tooltip at the given event's coordinates.\n   * If the `html` parameter is missing, moves the existing tooltip to the new position.\n   */\n\n\n  Chart.prototype.showTooltip = function (meta, html) {\n    var el = this.tooltipElement;\n    var container = this.container;\n\n    if (html !== undefined) {\n      el.innerHTML = html;\n    } else if (!el.innerHTML) {\n      return;\n    }\n\n    if (html) {\n      this.toggleTooltip(true);\n    }\n\n    var left = meta.pageX - el.clientWidth / 2;\n    var top = meta.pageY - el.clientHeight - 8;\n\n    if (container) {\n      var tooltipRect = el.getBoundingClientRect();\n      var minLeft = 0;\n      var maxLeft = window.innerWidth - tooltipRect.width;\n\n      if (left < minLeft) {\n        left = minLeft;\n        this.updateTooltipClass(true, true);\n      } else if (left > maxLeft) {\n        left = maxLeft;\n        this.updateTooltipClass(true, true);\n      }\n    }\n\n    el.style.left = left + \"px\";\n    el.style.top = top + \"px\";\n  };\n\n  Chart.prototype.hideTooltip = function () {\n    this.toggleTooltip(false);\n  };\n\n  Chart.defaultTooltipClass = 'ag-chart-tooltip';\n  Chart.tooltipDocuments = [];\n\n  __decorate([reactive('layoutChange')], Chart.prototype, \"padding\", void 0);\n\n  __decorate([reactive('layoutChange')], Chart.prototype, \"title\", void 0);\n\n  __decorate([reactive('layoutChange')], Chart.prototype, \"subtitle\", void 0);\n\n  return Chart;\n}(Observable);\n\nexport { Chart };","map":{"version":3,"sources":["E:/Expense-Tracker/frontend/node_modules/ag-charts-community/dist/es6/chart/chart.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Scene","Group","Padding","Shape","Rect","Legend","find","SizeMonitor","Observable","reactive","CartesianSeries","createId","defaultTooltipCss","toTooltipHtml","input","defaults","_a","content","_b","title","undefined","_c","titleColor","_d","titleBackgroundColor","titleHtml","Chart","defaultTooltipClass","_super","document","window","_this","id","background","legend","legendAutoPadding","captionAutoPadding","_container","_data","_autoSize","padding","_axes","_series","_axesChanged","_seriesChanged","layoutCallbackId","_performLayout","width","height","performLayout","layoutPending","fireEvent","type","dataCallbackId","_onMouseDown","onMouseDown","bind","_onMouseUp","onMouseUp","_onMouseMove","onMouseMove","_onMouseOut","onMouseOut","_onClick","onClick","_tooltipClass","tooltipTracking","root","fill","appendChild","element","_element","createElement","setAttribute","scene","container","autoSize","addEventListener","onLayoutChange","addPropertyListener","onLegendPositionChange","tooltipElement","tooltipClass","body","tooltipDocuments","indexOf","styleElement","innerHTML","head","insertBefore","querySelector","push","setupDomListeners","canvas","onCaptionChange","get","set","value","parentNode","removeChild","enumerable","configurable","data","series","forEach","resize","style","chart_1","observe","size","display","unobserve","download","fileName","destroy","tooltipParent","cleanupDomListeners","clear","event","oldValue","removeEventListener","node","values","axis","detachAxis","filter","a","linkedTo","concat","attachAxis","axesChanged","group","seriesRoot","removeAllSeries","addSeries","scheduleLayout","scheduleData","dehighlightDatum","dataPending","before","allSeries","canAdd","beforeIndex","splice","append","initSeries","seriesChanged","chart","updateLegend","onSeriesNodeClick","freeSeries","addSeriesAfter","after","afterIndex","unshift","removeSeries","index","assignSeriesToAxes","axes","axisName","direction","boundSeries","assignAxesToSeries","force","directionToAxesMap","directionAxes","directions","findMatchingAxis","getKeys","xAxis","console","warn","yAxis","directionKeys","axisKeys","keys","j","requestAnimationFrame","cancelAnimationFrame","clearTimeout","setTimeout","processData","visible","legendData","showInLegend","listSeriesItems","positionCaptions","subtitle","titleVisible","subtitleVisible","spacing","paddingTop","enabled","x","y","titleBBox","computeBBox","subtitleBBox","Math","floor","positionLegend","legendGroup","legendSpacing","translationX","translationY","legendBBox","position","bottom","top","left","right","chartElement","pickSeriesNode","seriesRect","containsPoint","pickNode","pickClosestSeriesNodeDatum","getDistance","p1","p2","sqrt","pow","minDistance","Infinity","closestDatum","_loop_1","hitPoint","transformPoint","getNodeData","datum","point","distance","lastPick","pick","offsetX","offsetY","nodeDatum","onSeriesDatumPick","tooltipEnabled","showTooltip","hideTooltip","inverseTransformPoint","canvasRect","getBoundingClientRect","pageX","round","pageXOffset","pageY","pageYOffset","toggleTooltip","checkSeriesNodeClick","checkLegendClick","fireNodeClickEvent","getDatumForPoint","id_1","itemId","toggleSeriesItem","meta","highlightDatum","html","getTooltipHtml","highlightedDatum","onHighlightChange","updateTooltipClass","constrained","classList","join","el","clientWidth","clientHeight","tooltipRect","minLeft","maxLeft","innerWidth"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Scene } from \"../scene/scene\";\nimport { Group } from \"../scene/group\";\nimport { Padding } from \"../util/padding\";\nimport { Shape } from \"../scene/shape/shape\";\nimport { Rect } from \"../scene/shape/rect\";\nimport { Legend } from \"./legend\";\nimport { find } from \"../util/array\";\nimport { SizeMonitor } from \"../util/sizeMonitor\";\nimport { Observable, reactive } from \"../util/observable\";\nimport { CartesianSeries } from \"./series/cartesian/cartesianSeries\";\nimport { createId } from \"../util/id\";\nvar defaultTooltipCss = \"\\n.ag-chart-tooltip {\\n    display: none;\\n    position: absolute;\\n    user-select: none;\\n    pointer-events: none;\\n    white-space: nowrap;\\n    z-index: 99999;\\n    font: 12px Verdana, sans-serif;\\n    color: black;\\n    background: rgb(244, 244, 244);\\n    border-radius: 5px;\\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\\n}\\n\\n.ag-chart-tooltip-visible {\\n    display: table;\\n}\\n\\n.ag-chart-tooltip-title {\\n    font-weight: bold;\\n    padding: 7px;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n    color: white;\\n    background-color: #888888;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-content {\\n    padding: 7px;\\n    line-height: 1.7em;\\n    border-bottom-left-radius: 5px;\\n    border-bottom-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-arrow::before {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 6px solid #989898;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: #989898;\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-tooltip-arrow::after {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 5px solid black;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: rgb(244, 244, 244);\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-wrapper {\\n    box-sizing: border-box;\\n    overflow: hidden;\\n}\\n\";\nexport function toTooltipHtml(input, defaults) {\n    if (typeof input === 'string') {\n        return input;\n    }\n    defaults = defaults || {};\n    var _a = input.content, content = _a === void 0 ? defaults.content || '' : _a, _b = input.title, title = _b === void 0 ? defaults.title || undefined : _b, _c = input.titleColor, titleColor = _c === void 0 ? defaults.titleColor || 'white' : _c, _d = input.titleBackgroundColor, titleBackgroundColor = _d === void 0 ? defaults.titleBackgroundColor || '#888' : _d;\n    var titleHtml = title ? \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-title\\\"\\n        style=\\\"color: \" + titleColor + \"; background-color: \" + titleBackgroundColor + \"\\\">\" + title + \"</div>\" : '';\n    return titleHtml + \"<div class=\\\"\" + Chart.defaultTooltipClass + \"-content\\\">\" + content + \"</div>\";\n}\nvar Chart = /** @class */ (function (_super) {\n    __extends(Chart, _super);\n    function Chart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this) || this;\n        _this.id = createId(_this);\n        _this.background = new Rect();\n        _this.legend = new Legend();\n        _this.legendAutoPadding = new Padding();\n        _this.captionAutoPadding = 0; // top padding only\n        _this._container = undefined;\n        _this._data = [];\n        _this._autoSize = false;\n        _this.padding = new Padding(20);\n        _this._axes = [];\n        _this._series = [];\n        _this._axesChanged = false;\n        _this._seriesChanged = false;\n        _this.layoutCallbackId = 0;\n        _this._performLayout = function () {\n            _this.layoutCallbackId = 0;\n            _this.background.width = _this.width;\n            _this.background.height = _this.height;\n            _this.performLayout();\n            if (!_this.layoutPending) {\n                _this.fireEvent({ type: 'layoutDone' });\n            }\n        };\n        _this.dataCallbackId = 0;\n        _this._onMouseDown = _this.onMouseDown.bind(_this);\n        _this._onMouseUp = _this.onMouseUp.bind(_this);\n        _this._onMouseMove = _this.onMouseMove.bind(_this);\n        _this._onMouseOut = _this.onMouseOut.bind(_this);\n        _this._onClick = _this.onClick.bind(_this);\n        _this._tooltipClass = Chart.defaultTooltipClass;\n        /**\n         * If `true`, the tooltip will be shown for the marker closest to the mouse cursor.\n         * Only has effect on series with markers.\n         */\n        _this.tooltipTracking = true;\n        var root = new Group();\n        var background = _this.background;\n        background.fill = 'white';\n        root.appendChild(background);\n        var element = _this._element = document.createElement('div');\n        element.setAttribute('class', 'ag-chart-wrapper');\n        var scene = new Scene(document);\n        _this.scene = scene;\n        scene.root = root;\n        scene.container = element;\n        _this.autoSize = true;\n        var legend = _this.legend;\n        legend.addEventListener('layoutChange', _this.onLayoutChange, _this);\n        legend.addPropertyListener('position', _this.onLegendPositionChange, _this);\n        _this.tooltipElement = document.createElement('div');\n        _this.tooltipClass = '';\n        document.body.appendChild(_this.tooltipElement);\n        if (Chart.tooltipDocuments.indexOf(document) < 0) {\n            var styleElement = document.createElement('style');\n            styleElement.innerHTML = defaultTooltipCss;\n            // Make sure the default tooltip style goes before other styles so it can be overridden.\n            document.head.insertBefore(styleElement, document.head.querySelector('style'));\n            Chart.tooltipDocuments.push(document);\n        }\n        _this.setupDomListeners(scene.canvas.element);\n        _this.addPropertyListener('title', _this.onCaptionChange);\n        _this.addPropertyListener('subtitle', _this.onCaptionChange);\n        _this.addEventListener('layoutChange', function () { return _this.layoutPending = true; });\n        return _this;\n    }\n    Object.defineProperty(Chart.prototype, \"container\", {\n        get: function () {\n            return this._container;\n        },\n        set: function (value) {\n            if (this._container !== value) {\n                var parentNode = this.element.parentNode;\n                if (parentNode != null) {\n                    parentNode.removeChild(this.element);\n                }\n                if (value) {\n                    value.appendChild(this.element);\n                }\n                this._container = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        set: function (data) {\n            this._data = data;\n            this.series.forEach(function (series) { return series.data = data; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"width\", {\n        get: function () {\n            return this.scene.width;\n        },\n        set: function (value) {\n            this.autoSize = false;\n            if (this.width !== value) {\n                this.scene.resize(value, this.height);\n                this.fireEvent({ type: 'layoutChange' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"height\", {\n        get: function () {\n            return this.scene.height;\n        },\n        set: function (value) {\n            this.autoSize = false;\n            if (this.height !== value) {\n                this.scene.resize(this.width, value);\n                this.fireEvent({ type: 'layoutChange' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"autoSize\", {\n        get: function () {\n            return this._autoSize;\n        },\n        set: function (value) {\n            if (this._autoSize !== value) {\n                this._autoSize = value;\n                var style = this.element.style;\n                if (value) {\n                    var chart_1 = this; // capture `this` for IE11\n                    SizeMonitor.observe(this.element, function (size) {\n                        if (size.width !== chart_1.width || size.height !== chart_1.height) {\n                            chart_1.scene.resize(size.width, size.height);\n                            chart_1.fireEvent({ type: 'layoutChange' });\n                        }\n                    });\n                    style.display = 'block';\n                    style.width = '100%';\n                    style.height = '100%';\n                }\n                else {\n                    SizeMonitor.unobserve(this.element);\n                    style.display = 'inline-block';\n                    style.width = 'auto';\n                    style.height = 'auto';\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.download = function (fileName) {\n        this.scene.download(fileName);\n    };\n    Chart.prototype.destroy = function () {\n        var tooltipParent = this.tooltipElement.parentNode;\n        if (tooltipParent) {\n            tooltipParent.removeChild(this.tooltipElement);\n        }\n        SizeMonitor.unobserve(this.element);\n        this.container = undefined;\n        this.cleanupDomListeners(this.scene.canvas.element);\n        this.scene.container = undefined;\n    };\n    Chart.prototype.onLayoutChange = function () {\n        this.layoutPending = true;\n    };\n    Chart.prototype.onLegendPositionChange = function () {\n        this.legendAutoPadding.clear();\n        this.layoutPending = true;\n    };\n    Chart.prototype.onCaptionChange = function (event) {\n        var value = event.value, oldValue = event.oldValue;\n        if (oldValue) {\n            oldValue.removeEventListener('change', this.onLayoutChange, this);\n            this.scene.root.removeChild(oldValue.node);\n        }\n        if (value) {\n            value.addEventListener('change', this.onLayoutChange, this);\n            this.scene.root.appendChild(value.node);\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"element\", {\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"axes\", {\n        get: function () {\n            return this._axes;\n        },\n        set: function (values) {\n            var _this = this;\n            this._axes.forEach(function (axis) { return _this.detachAxis(axis); });\n            // make linked axes go after the regular ones (simulates stable sort by `linkedTo` property)\n            this._axes = values.filter(function (a) { return !a.linkedTo; }).concat(values.filter(function (a) { return a.linkedTo; }));\n            this._axes.forEach(function (axis) { return _this.attachAxis(axis); });\n            this.axesChanged = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.attachAxis = function (axis) {\n        this.scene.root.insertBefore(axis.group, this.seriesRoot);\n    };\n    Chart.prototype.detachAxis = function (axis) {\n        this.scene.root.removeChild(axis.group);\n    };\n    Object.defineProperty(Chart.prototype, \"series\", {\n        get: function () {\n            return this._series;\n        },\n        set: function (values) {\n            var _this = this;\n            this.removeAllSeries();\n            values.forEach(function (series) { return _this.addSeries(series); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.scheduleLayout = function () {\n        this.layoutPending = true;\n    };\n    Chart.prototype.scheduleData = function () {\n        // To prevent the chart from thinking the cursor is over the same node\n        // after a change to data (the nodes are reused on data changes).\n        this.dehighlightDatum();\n        this.dataPending = true;\n    };\n    Chart.prototype.addSeries = function (series, before) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var beforeIndex = before ? allSeries.indexOf(before) : -1;\n            if (beforeIndex >= 0) {\n                allSeries.splice(beforeIndex, 0, series);\n                seriesRoot.insertBefore(series.group, before.group);\n            }\n            else {\n                allSeries.push(series);\n                seriesRoot.append(series.group);\n            }\n            this.initSeries(series);\n            this.seriesChanged = true;\n            this.axesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.initSeries = function (series) {\n        series.chart = this;\n        if (!series.data) {\n            series.data = this.data;\n        }\n        series.addEventListener('layoutChange', this.scheduleLayout, this);\n        series.addEventListener('dataChange', this.scheduleData, this);\n        series.addEventListener('legendChange', this.updateLegend, this);\n        series.addEventListener('nodeClick', this.onSeriesNodeClick, this);\n    };\n    Chart.prototype.freeSeries = function (series) {\n        series.chart = undefined;\n        series.removeEventListener('layoutChange', this.scheduleLayout, this);\n        series.removeEventListener('dataChange', this.scheduleData, this);\n        series.removeEventListener('legendChange', this.updateLegend, this);\n        series.removeEventListener('nodeClick', this.onSeriesNodeClick, this);\n    };\n    Chart.prototype.addSeriesAfter = function (series, after) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var afterIndex = after ? this.series.indexOf(after) : -1;\n            if (afterIndex >= 0) {\n                if (afterIndex + 1 < allSeries.length) {\n                    seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.splice(afterIndex + 1, 0, series);\n            }\n            else {\n                if (allSeries.length > 0) {\n                    seriesRoot.insertBefore(series.group, allSeries[0].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.unshift(series);\n            }\n            this.seriesChanged = true;\n            this.axesChanged = true;\n        }\n        return false;\n    };\n    Chart.prototype.removeSeries = function (series) {\n        var index = this.series.indexOf(series);\n        if (index >= 0) {\n            this.series.splice(index, 1);\n            this.freeSeries(series);\n            this.seriesRoot.removeChild(series.group);\n            this.seriesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.removeAllSeries = function () {\n        var _this = this;\n        this.series.forEach(function (series) {\n            _this.freeSeries(series);\n            _this.seriesRoot.removeChild(series.group);\n        });\n        this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n        this.seriesChanged = true;\n    };\n    Chart.prototype.assignSeriesToAxes = function () {\n        var _this = this;\n        this.axes.forEach(function (axis) {\n            var axisName = axis.direction + 'Axis';\n            var boundSeries = [];\n            _this.series.forEach(function (series) {\n                if (series[axisName] === axis) {\n                    boundSeries.push(series);\n                }\n            });\n            axis.boundSeries = boundSeries;\n        });\n        this.seriesChanged = false;\n    };\n    Chart.prototype.assignAxesToSeries = function (force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        // This method has to run before `assignSeriesToAxes`.\n        var directionToAxesMap = {};\n        this.axes.forEach(function (axis) {\n            var direction = axis.direction;\n            var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n            directionAxes.push(axis);\n        });\n        this.series.forEach(function (series) {\n            series.directions.forEach(function (direction) {\n                var axisName = direction + 'Axis';\n                if (!series[axisName] || force) {\n                    var directionAxes = directionToAxesMap[direction];\n                    if (directionAxes) {\n                        var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n                        if (axis) {\n                            series[axisName] = axis;\n                        }\n                    }\n                }\n            });\n            if (series instanceof CartesianSeries) {\n                if (!series.xAxis) {\n                    console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n                if (!series.yAxis) {\n                    console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n            }\n        });\n        this.axesChanged = false;\n    };\n    Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n        for (var i = 0; i < directionAxes.length; i++) {\n            var axis = directionAxes[i];\n            var axisKeys = axis.keys;\n            if (!axisKeys.length) {\n                return axis;\n            }\n            else if (directionKeys) {\n                for (var j = 0; j < directionKeys.length; j++) {\n                    if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n                        return axis;\n                    }\n                }\n            }\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"axesChanged\", {\n        get: function () {\n            return this._axesChanged;\n        },\n        set: function (value) {\n            this._axesChanged = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n        get: function () {\n            return this._seriesChanged;\n        },\n        set: function (value) {\n            this._seriesChanged = value;\n            if (value) {\n                this.dataPending = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"layoutPending\", {\n        /**\n         * Only `true` while we are waiting for the layout to start.\n         * This will be `false` if the layout has already started and is ongoing.\n         */\n        get: function () {\n            return !!this.layoutCallbackId;\n        },\n        set: function (value) {\n            if (value) {\n                if (!(this.layoutCallbackId || this.dataPending)) {\n                    this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n                }\n            }\n            else if (this.layoutCallbackId) {\n                cancelAnimationFrame(this.layoutCallbackId);\n                this.layoutCallbackId = 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"dataPending\", {\n        get: function () {\n            return !!this.dataCallbackId;\n        },\n        set: function (value) {\n            var _this = this;\n            if (this.dataCallbackId) {\n                clearTimeout(this.dataCallbackId);\n                this.dataCallbackId = 0;\n            }\n            if (value) {\n                this.dataCallbackId = window.setTimeout(function () {\n                    _this.dataPending = false;\n                    _this.processData();\n                }, 0);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.processData = function () {\n        this.layoutPending = false;\n        if (this.axesChanged) {\n            this.assignAxesToSeries(true);\n            this.assignSeriesToAxes();\n        }\n        if (this.seriesChanged) {\n            this.assignSeriesToAxes();\n        }\n        this.series.filter(function (s) { return s.visible; }).forEach(function (series) { return series.processData(); });\n        this.updateLegend();\n        this.layoutPending = true;\n    };\n    Chart.prototype.updateLegend = function () {\n        var legendData = [];\n        this.series.filter(function (s) { return s.showInLegend; }).forEach(function (series) { return series.listSeriesItems(legendData); });\n        this.legend.data = legendData;\n    };\n    Chart.prototype.positionCaptions = function () {\n        var _a = this, title = _a.title, subtitle = _a.subtitle;\n        var titleVisible = false;\n        var subtitleVisible = false;\n        var spacing = 10;\n        var paddingTop = spacing;\n        if (title && title.enabled) {\n            title.node.x = this.width / 2;\n            title.node.y = paddingTop;\n            titleVisible = true;\n            var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n            if (titleBBox) {\n                paddingTop = titleBBox.y + titleBBox.height;\n            }\n            if (subtitle && subtitle.enabled) {\n                subtitle.node.x = this.width / 2;\n                subtitle.node.y = paddingTop + spacing;\n                subtitleVisible = true;\n                var subtitleBBox = subtitle.node.computeBBox();\n                if (subtitleBBox) {\n                    paddingTop = subtitleBBox.y + subtitleBBox.height;\n                }\n            }\n        }\n        if (title) {\n            title.node.visible = titleVisible;\n        }\n        if (subtitle) {\n            subtitle.node.visible = subtitleVisible;\n        }\n        this.captionAutoPadding = Math.floor(paddingTop);\n    };\n    Chart.prototype.positionLegend = function () {\n        if (!this.legend.enabled || !this.legend.data.length) {\n            return;\n        }\n        var _a = this, legend = _a.legend, captionAutoPadding = _a.captionAutoPadding, legendAutoPadding = _a.legendAutoPadding;\n        var width = this.width;\n        var height = this.height - captionAutoPadding;\n        var legendGroup = legend.group;\n        var legendSpacing = legend.spacing;\n        var translationX = 0;\n        var translationY = 0;\n        var legendBBox;\n        switch (legend.position) {\n            case 'bottom':\n                legend.performLayout(width - legendSpacing * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendSpacing;\n                legendAutoPadding.bottom = legendBBox.height;\n                break;\n            case 'top':\n                legend.performLayout(width - legendSpacing * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                translationY = captionAutoPadding + legendSpacing - legendBBox.y;\n                legendAutoPadding.top = legendBBox.height;\n                break;\n            case 'left':\n                legend.performLayout(0, height - legendSpacing * 2);\n                legendBBox = legendGroup.computeBBox();\n                translationX = legendSpacing - legendBBox.x;\n                translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.left = legendBBox.width;\n                break;\n            default: // case 'right':\n                legend.performLayout(0, height - legendSpacing * 2);\n                legendBBox = legendGroup.computeBBox();\n                translationX = width - legendBBox.width - legendBBox.x - legendSpacing;\n                translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.right = legendBBox.width;\n                break;\n        }\n        // Round off for pixel grid alignment to work properly.\n        legendGroup.translationX = Math.floor(translationX + legendGroup.translationX);\n        legendGroup.translationY = Math.floor(translationY + legendGroup.translationY);\n    };\n    Chart.prototype.setupDomListeners = function (chartElement) {\n        chartElement.addEventListener('mousedown', this._onMouseDown);\n        chartElement.addEventListener('mousemove', this._onMouseMove);\n        chartElement.addEventListener('mouseup', this._onMouseUp);\n        chartElement.addEventListener('mouseout', this._onMouseOut);\n        chartElement.addEventListener('click', this._onClick);\n    };\n    Chart.prototype.cleanupDomListeners = function (chartElement) {\n        chartElement.removeEventListener('mousedown', this._onMouseDown);\n        chartElement.removeEventListener('mousemove', this._onMouseMove);\n        chartElement.removeEventListener('mouseup', this._onMouseUp);\n        chartElement.removeEventListener('mouseout', this._onMouseOut);\n        chartElement.removeEventListener('click', this._onClick);\n    };\n    // x/y are local canvas coordinates in CSS pixels, not actual pixels\n    Chart.prototype.pickSeriesNode = function (x, y) {\n        if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n            return undefined;\n        }\n        var allSeries = this.series;\n        var node = undefined;\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            var series = allSeries[i];\n            node = series.group.pickNode(x, y);\n            if (node) {\n                return {\n                    series: series,\n                    node: node\n                };\n            }\n        }\n    };\n    // Provided x/y are in canvas coordinates.\n    Chart.prototype.pickClosestSeriesNodeDatum = function (x, y) {\n        if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n            return undefined;\n        }\n        var allSeries = this.series;\n        function getDistance(p1, p2) {\n            return Math.sqrt(Math.pow((p1.x - p2.x), 2) + Math.pow((p1.y - p2.y), 2));\n        }\n        var minDistance = Infinity;\n        var closestDatum;\n        var _loop_1 = function (i) {\n            var series = allSeries[i];\n            if (!series.visible) {\n                return \"continue\";\n            }\n            var hitPoint = series.group.transformPoint(x, y);\n            series.getNodeData().forEach(function (datum) {\n                if (!datum.point) {\n                    return;\n                }\n                var distance = getDistance(hitPoint, datum.point);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    closestDatum = datum;\n                }\n            });\n        };\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            _loop_1(i);\n        }\n        if (closestDatum) {\n            return closestDatum;\n        }\n    };\n    Chart.prototype.onMouseMove = function (event) {\n        var _a = this, lastPick = _a.lastPick, tooltipTracking = _a.tooltipTracking;\n        var pick = this.pickSeriesNode(event.offsetX, event.offsetY);\n        var nodeDatum;\n        if (pick && pick.node instanceof Shape) {\n            var node = pick.node;\n            nodeDatum = node.datum;\n            if (lastPick && lastPick.datum === nodeDatum) {\n                lastPick.node = node;\n            }\n            // Marker nodes will have the `point` info in their datums.\n            // Highlight if not a marker node or, if not in the tracking mode, highlight markers too.\n            if ((!node.datum.point || !tooltipTracking)) {\n                if (!lastPick // cursor moved from empty space to a node\n                    || lastPick.node !== node) { // cursor moved from one node to another\n                    this.onSeriesDatumPick(event, node.datum, node);\n                }\n                else if (pick.series.tooltipEnabled) { // cursor moved within the same node\n                    this.showTooltip(event);\n                }\n                // A non-marker node (takes precedence over marker nodes) was highlighted.\n                // Or we are not in the tracking mode.\n                // Either way, we are done at this point.\n                return;\n            }\n        }\n        var hideTooltip = false;\n        // In tracking mode a tooltip is shown for the closest rendered datum.\n        // This makes it easier to show tooltips when markers are small and/or plentiful\n        // and also gives the ability to show tooltips even when the series were configured\n        // to not render markers.\n        if (tooltipTracking) {\n            var closestDatum = this.pickClosestSeriesNodeDatum(event.offsetX, event.offsetY);\n            if (closestDatum && closestDatum.point) {\n                var _b = closestDatum.point, x = _b.x, y = _b.y;\n                var canvas = this.scene.canvas;\n                var point = closestDatum.series.group.inverseTransformPoint(x, y);\n                var canvasRect = canvas.element.getBoundingClientRect();\n                this.onSeriesDatumPick({\n                    pageX: Math.round(canvasRect.left + window.pageXOffset + point.x),\n                    pageY: Math.round(canvasRect.top + window.pageYOffset + point.y)\n                }, closestDatum, nodeDatum === closestDatum && pick ? pick.node : undefined);\n            }\n            else {\n                hideTooltip = true;\n            }\n        }\n        if (lastPick && (hideTooltip || !tooltipTracking)) {\n            // cursor moved from a non-marker node to empty space\n            this.dehighlightDatum();\n            this.hideTooltip();\n            this.lastPick = undefined;\n        }\n    };\n    Chart.prototype.onMouseDown = function (event) { };\n    Chart.prototype.onMouseUp = function (event) { };\n    Chart.prototype.onMouseOut = function (event) {\n        this.toggleTooltip(false);\n    };\n    Chart.prototype.onClick = function (event) {\n        this.checkSeriesNodeClick();\n        this.checkLegendClick(event);\n    };\n    Chart.prototype.checkSeriesNodeClick = function () {\n        var lastPick = this.lastPick;\n        if (lastPick && lastPick.node) {\n            var datum = lastPick.datum;\n            datum.series.fireNodeClickEvent(datum);\n        }\n    };\n    Chart.prototype.onSeriesNodeClick = function (event) {\n        this.fireEvent(__assign(__assign({}, event), { type: 'seriesNodeClick' }));\n    };\n    Chart.prototype.checkLegendClick = function (event) {\n        var datum = this.legend.getDatumForPoint(event.offsetX, event.offsetY);\n        if (datum) {\n            var id_1 = datum.id, itemId = datum.itemId, enabled = datum.enabled;\n            var series = find(this.series, function (series) { return series.id === id_1; });\n            if (series) {\n                series.toggleSeriesItem(itemId, !enabled);\n                if (enabled) {\n                    this.hideTooltip();\n                }\n            }\n        }\n    };\n    Chart.prototype.onSeriesDatumPick = function (meta, datum, node) {\n        if (this.lastPick) {\n            // this.lastPick.datum.series.dehighlightDatum();\n            this.dehighlightDatum();\n        }\n        this.lastPick = {\n            datum: datum,\n            node: node\n        };\n        this.highlightDatum(datum);\n        var html = datum.series.tooltipEnabled && datum.series.getTooltipHtml(datum);\n        if (html) {\n            this.showTooltip(meta, html);\n        }\n    };\n    Chart.prototype.highlightDatum = function (datum) {\n        this.highlightedDatum = datum;\n        this.series.forEach(function (s) { return s.onHighlightChange(); });\n    };\n    Chart.prototype.dehighlightDatum = function () {\n        if (this.highlightedDatum) {\n            this.highlightedDatum = undefined;\n            this.series.forEach(function (s) { return s.onHighlightChange(); });\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n        get: function () {\n            return this._tooltipClass;\n        },\n        set: function (value) {\n            if (this._tooltipClass !== value) {\n                this._tooltipClass = value;\n                this.toggleTooltip();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.toggleTooltip = function (visible) {\n        if (!visible && this.lastPick) {\n            this.dehighlightDatum();\n            this.lastPick = undefined;\n        }\n        this.updateTooltipClass(visible);\n    };\n    Chart.prototype.updateTooltipClass = function (visible, constrained) {\n        var classList = [Chart.defaultTooltipClass, this.tooltipClass];\n        if (visible === true) {\n            classList.push(Chart.defaultTooltipClass + \"-visible\");\n        }\n        if (constrained !== true) {\n            classList.push(Chart.defaultTooltipClass + \"-arrow\");\n        }\n        this.tooltipElement.setAttribute('class', classList.join(' '));\n    };\n    /**\n     * Shows tooltip at the given event's coordinates.\n     * If the `html` parameter is missing, moves the existing tooltip to the new position.\n     */\n    Chart.prototype.showTooltip = function (meta, html) {\n        var el = this.tooltipElement;\n        var container = this.container;\n        if (html !== undefined) {\n            el.innerHTML = html;\n        }\n        else if (!el.innerHTML) {\n            return;\n        }\n        if (html) {\n            this.toggleTooltip(true);\n        }\n        var left = meta.pageX - el.clientWidth / 2;\n        var top = meta.pageY - el.clientHeight - 8;\n        if (container) {\n            var tooltipRect = el.getBoundingClientRect();\n            var minLeft = 0;\n            var maxLeft = window.innerWidth - tooltipRect.width;\n            if (left < minLeft) {\n                left = minLeft;\n                this.updateTooltipClass(true, true);\n            }\n            else if (left > maxLeft) {\n                left = maxLeft;\n                this.updateTooltipClass(true, true);\n            }\n        }\n        el.style.left = left + \"px\";\n        el.style.top = top + \"px\";\n    };\n    Chart.prototype.hideTooltip = function () {\n        this.toggleTooltip(false);\n    };\n    Chart.defaultTooltipClass = 'ag-chart-tooltip';\n    Chart.tooltipDocuments = [];\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"padding\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"title\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"subtitle\", void 0);\n    return Chart;\n}(Observable));\nexport { Chart };\n"]},"metadata":{},"sourceType":"module"}