{"ast":null,"code":"import { RangeSelector } from \"../shapes/rangeSelector\";\nimport { ChartAxisDirection } from \"../chartAxis\";\nimport { BBox } from \"../../scene/bbox\";\nimport { NavigatorMask } from \"./navigatorMask\";\nimport { NavigatorHandle } from \"./navigatorHandle\";\n\nvar Navigator =\n/** @class */\nfunction () {\n  function Navigator(chart) {\n    var _this = this;\n\n    this.rs = new RangeSelector();\n    this.mask = new NavigatorMask(this.rs.mask);\n    this.minHandle = new NavigatorHandle(this.rs.minHandle);\n    this.maxHandle = new NavigatorHandle(this.rs.maxHandle);\n    this.minHandleDragging = false;\n    this.maxHandleDragging = false;\n    this.panHandleOffset = NaN;\n    this._margin = 10;\n    this.chart = chart;\n    chart.scene.root.append(this.rs);\n\n    this.rs.onRangeChange = function (min, max) {\n      return _this.updateAxes(min, max);\n    };\n  }\n\n  Object.defineProperty(Navigator.prototype, \"enabled\", {\n    get: function () {\n      return this.rs.visible;\n    },\n    set: function (value) {\n      this.rs.visible = value;\n      this.chart.layoutPending = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"x\", {\n    get: function () {\n      return this.rs.x;\n    },\n    set: function (value) {\n      this.rs.x = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"y\", {\n    get: function () {\n      return this.rs.y;\n    },\n    set: function (value) {\n      this.rs.y = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"width\", {\n    get: function () {\n      return this.rs.width;\n    },\n    set: function (value) {\n      this.rs.width = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"height\", {\n    get: function () {\n      return this.rs.height;\n    },\n    set: function (value) {\n      this.rs.height = value;\n      this.chart.layoutPending = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"margin\", {\n    get: function () {\n      return this._margin;\n    },\n    set: function (value) {\n      this._margin = value;\n      this.chart.layoutPending = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"min\", {\n    get: function () {\n      return this.rs.min;\n    },\n    set: function (value) {\n      this.rs.min = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Navigator.prototype, \"max\", {\n    get: function () {\n      return this.rs.max;\n    },\n    set: function (value) {\n      this.rs.max = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Navigator.prototype.updateAxes = function (min, max) {\n    var chart = this.chart;\n    var clipSeries = false;\n    chart.axes.forEach(function (axis) {\n      if (axis.direction === ChartAxisDirection.X) {\n        if (!clipSeries && (min > 0 || max < 1)) {\n          clipSeries = true;\n        }\n\n        axis.visibleRange = [min, max];\n        axis.update();\n      }\n    });\n    chart.seriesRoot.enabled = clipSeries;\n    chart.series.forEach(function (series) {\n      return series.update();\n    });\n  };\n\n  Navigator.prototype.onMouseDown = function (event) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var offsetX = event.offsetX,\n        offsetY = event.offsetY;\n    var rs = this.rs;\n    var minHandle = rs.minHandle,\n        maxHandle = rs.maxHandle,\n        x = rs.x,\n        width = rs.width,\n        min = rs.min;\n    var visibleRange = rs.computeVisibleRangeBBox();\n\n    if (!(this.minHandleDragging || this.maxHandleDragging)) {\n      if (minHandle.containsPoint(offsetX, offsetY)) {\n        this.minHandleDragging = true;\n      } else if (maxHandle.containsPoint(offsetX, offsetY)) {\n        this.maxHandleDragging = true;\n      } else if (visibleRange.containsPoint(offsetX, offsetY)) {\n        this.panHandleOffset = (offsetX - x) / width - min;\n      }\n    }\n  };\n\n  Navigator.prototype.onMouseMove = function (event) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var _a = this,\n        rs = _a.rs,\n        panHandleOffset = _a.panHandleOffset;\n\n    var x = rs.x,\n        y = rs.y,\n        width = rs.width,\n        height = rs.height,\n        minHandle = rs.minHandle,\n        maxHandle = rs.maxHandle;\n    var style = this.chart.element.style;\n    var offsetX = event.offsetX,\n        offsetY = event.offsetY;\n    var minX = x + width * rs.min;\n    var maxX = x + width * rs.max;\n    var visibleRange = new BBox(minX, y, maxX - minX, height);\n\n    function getRatio() {\n      return Math.min(Math.max((offsetX - x) / width, 0), 1);\n    }\n\n    if (minHandle.containsPoint(offsetX, offsetY)) {\n      style.cursor = 'ew-resize';\n    } else if (maxHandle.containsPoint(offsetX, offsetY)) {\n      style.cursor = 'ew-resize';\n    } else if (visibleRange.containsPoint(offsetX, offsetY)) {\n      style.cursor = 'grab';\n    } else {\n      style.cursor = 'default';\n    }\n\n    if (this.minHandleDragging) {\n      rs.min = getRatio();\n    } else if (this.maxHandleDragging) {\n      rs.max = getRatio();\n    } else if (!isNaN(panHandleOffset)) {\n      var span = rs.max - rs.min;\n      var min = Math.min(getRatio() - panHandleOffset, 1 - span);\n\n      if (min <= rs.min) {\n        // pan left\n        rs.min = min;\n        rs.max = rs.min + span;\n      } else {\n        // pan right\n        rs.max = min + span;\n        rs.min = rs.max - span;\n      }\n    }\n  };\n\n  Navigator.prototype.onMouseOut = function (event) {\n    this.stopHandleDragging();\n  };\n\n  Navigator.prototype.onMouseUp = function (event) {\n    this.stopHandleDragging();\n  };\n\n  Navigator.prototype.stopHandleDragging = function () {\n    this.minHandleDragging = this.maxHandleDragging = false;\n    this.panHandleOffset = NaN;\n  };\n\n  return Navigator;\n}();\n\nexport { Navigator };","map":{"version":3,"sources":["E:/Expense-Tracker/frontend/node_modules/ag-charts-community/dist/es6/chart/navigator/navigator.js"],"names":["RangeSelector","ChartAxisDirection","BBox","NavigatorMask","NavigatorHandle","Navigator","chart","_this","rs","mask","minHandle","maxHandle","minHandleDragging","maxHandleDragging","panHandleOffset","NaN","_margin","scene","root","append","onRangeChange","min","max","updateAxes","Object","defineProperty","prototype","get","visible","set","value","layoutPending","enumerable","configurable","x","y","width","height","clipSeries","axes","forEach","axis","direction","X","visibleRange","update","seriesRoot","enabled","series","onMouseDown","event","offsetX","offsetY","computeVisibleRangeBBox","containsPoint","onMouseMove","_a","style","element","minX","maxX","getRatio","Math","cursor","isNaN","span","onMouseOut","stopHandleDragging","onMouseUp"],"mappings":"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","sourcesContent":["import { RangeSelector } from \"../shapes/rangeSelector\";\nimport { ChartAxisDirection } from \"../chartAxis\";\nimport { BBox } from \"../../scene/bbox\";\nimport { NavigatorMask } from \"./navigatorMask\";\nimport { NavigatorHandle } from \"./navigatorHandle\";\nvar Navigator = /** @class */ (function () {\n    function Navigator(chart) {\n        var _this = this;\n        this.rs = new RangeSelector();\n        this.mask = new NavigatorMask(this.rs.mask);\n        this.minHandle = new NavigatorHandle(this.rs.minHandle);\n        this.maxHandle = new NavigatorHandle(this.rs.maxHandle);\n        this.minHandleDragging = false;\n        this.maxHandleDragging = false;\n        this.panHandleOffset = NaN;\n        this._margin = 10;\n        this.chart = chart;\n        chart.scene.root.append(this.rs);\n        this.rs.onRangeChange = function (min, max) { return _this.updateAxes(min, max); };\n    }\n    Object.defineProperty(Navigator.prototype, \"enabled\", {\n        get: function () {\n            return this.rs.visible;\n        },\n        set: function (value) {\n            this.rs.visible = value;\n            this.chart.layoutPending = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"x\", {\n        get: function () {\n            return this.rs.x;\n        },\n        set: function (value) {\n            this.rs.x = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"y\", {\n        get: function () {\n            return this.rs.y;\n        },\n        set: function (value) {\n            this.rs.y = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"width\", {\n        get: function () {\n            return this.rs.width;\n        },\n        set: function (value) {\n            this.rs.width = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"height\", {\n        get: function () {\n            return this.rs.height;\n        },\n        set: function (value) {\n            this.rs.height = value;\n            this.chart.layoutPending = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"margin\", {\n        get: function () {\n            return this._margin;\n        },\n        set: function (value) {\n            this._margin = value;\n            this.chart.layoutPending = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"min\", {\n        get: function () {\n            return this.rs.min;\n        },\n        set: function (value) {\n            this.rs.min = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Navigator.prototype, \"max\", {\n        get: function () {\n            return this.rs.max;\n        },\n        set: function (value) {\n            this.rs.max = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Navigator.prototype.updateAxes = function (min, max) {\n        var chart = this.chart;\n        var clipSeries = false;\n        chart.axes.forEach(function (axis) {\n            if (axis.direction === ChartAxisDirection.X) {\n                if (!clipSeries && (min > 0 || max < 1)) {\n                    clipSeries = true;\n                }\n                axis.visibleRange = [min, max];\n                axis.update();\n            }\n        });\n        chart.seriesRoot.enabled = clipSeries;\n        chart.series.forEach(function (series) { return series.update(); });\n    };\n    Navigator.prototype.onMouseDown = function (event) {\n        if (!this.enabled) {\n            return;\n        }\n        var offsetX = event.offsetX, offsetY = event.offsetY;\n        var rs = this.rs;\n        var minHandle = rs.minHandle, maxHandle = rs.maxHandle, x = rs.x, width = rs.width, min = rs.min;\n        var visibleRange = rs.computeVisibleRangeBBox();\n        if (!(this.minHandleDragging || this.maxHandleDragging)) {\n            if (minHandle.containsPoint(offsetX, offsetY)) {\n                this.minHandleDragging = true;\n            }\n            else if (maxHandle.containsPoint(offsetX, offsetY)) {\n                this.maxHandleDragging = true;\n            }\n            else if (visibleRange.containsPoint(offsetX, offsetY)) {\n                this.panHandleOffset = (offsetX - x) / width - min;\n            }\n        }\n    };\n    Navigator.prototype.onMouseMove = function (event) {\n        if (!this.enabled) {\n            return;\n        }\n        var _a = this, rs = _a.rs, panHandleOffset = _a.panHandleOffset;\n        var x = rs.x, y = rs.y, width = rs.width, height = rs.height, minHandle = rs.minHandle, maxHandle = rs.maxHandle;\n        var style = this.chart.element.style;\n        var offsetX = event.offsetX, offsetY = event.offsetY;\n        var minX = x + width * rs.min;\n        var maxX = x + width * rs.max;\n        var visibleRange = new BBox(minX, y, maxX - minX, height);\n        function getRatio() {\n            return Math.min(Math.max((offsetX - x) / width, 0), 1);\n        }\n        if (minHandle.containsPoint(offsetX, offsetY)) {\n            style.cursor = 'ew-resize';\n        }\n        else if (maxHandle.containsPoint(offsetX, offsetY)) {\n            style.cursor = 'ew-resize';\n        }\n        else if (visibleRange.containsPoint(offsetX, offsetY)) {\n            style.cursor = 'grab';\n        }\n        else {\n            style.cursor = 'default';\n        }\n        if (this.minHandleDragging) {\n            rs.min = getRatio();\n        }\n        else if (this.maxHandleDragging) {\n            rs.max = getRatio();\n        }\n        else if (!isNaN(panHandleOffset)) {\n            var span = rs.max - rs.min;\n            var min = Math.min(getRatio() - panHandleOffset, 1 - span);\n            if (min <= rs.min) { // pan left\n                rs.min = min;\n                rs.max = rs.min + span;\n            }\n            else { // pan right\n                rs.max = min + span;\n                rs.min = rs.max - span;\n            }\n        }\n    };\n    Navigator.prototype.onMouseOut = function (event) {\n        this.stopHandleDragging();\n    };\n    Navigator.prototype.onMouseUp = function (event) {\n        this.stopHandleDragging();\n    };\n    Navigator.prototype.stopHandleDragging = function () {\n        this.minHandleDragging = this.maxHandleDragging = false;\n        this.panHandleOffset = NaN;\n    };\n    return Navigator;\n}());\nexport { Navigator };\n"]},"metadata":{},"sourceType":"module"}